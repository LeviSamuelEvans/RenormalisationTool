base_path: "/scratch4/levans/L2_ttHbb_Production_212238_v5/"
nominal_weight: "weight_normalise*weight_mc*weight_pileup*weight_leptonSF*weight_jvt*weight_L2_bTag_DL1r_Continuous*weight_leptonSF_SOFTMU_corr_based*(randomRunNumber<=311481 ? 36646.74 : (randomRunNumber<=340453 ? 44630.6 : 58791.6))"

extra_selections:
  resolved: " && (passedOfflineBoostedSelection == 0)"

folders:
  - "1l/5j3b_discriminant_ttlight"
  - "1l/5j3b_discriminant_ttc"
  - "1l/5j3b_discriminant_ttb"
  - "1l/5j3b_discriminant_ttbb"
  - "1l/5j3b_discriminant_ttB"
  - "1l/5j3b_discriminant_ttH"
  - "1l/boosted"
  - "2l/3j3b_discriminant_ttlight"
  - "2l/3j3b_discriminant_ttc"
  - "2l/3j3b_discriminant_ttb"
  - "2l/3j3b_discriminant_ttbb"
  - "2l/3j3b_discriminant_ttB"
  - "2l/3j3b_discriminant_ttH"

flavours:
  tt_light:
    selection: "(HF_SimpleClassification == 0)"
    files:
      - "tt_PP8_mc16a"
      - "tt_PP8_mc16d"
      - "tt_PP8_mc16e"
    systematics:
      - name: "muR"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR20_muF10*weight_normalise_muR20_muF10) ) * weight_ht_reweight_muR_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR05_muF10*weight_normalise_muR05_muF10) ) * weight_ht_reweight_muR_down"
      - name: "muF"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR10_muF20*weight_normalise_muR10_muF20) ) * weight_ht_reweight_muF_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR10_muF05*weight_normalise_muR10_muF05) ) * weight_ht_reweight_muF_down"
      - name: "ISR"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_var3c_up*weight_normalise_var3c_up) ) * weight_ht_reweight_isr_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_var3c_down*weight_normalise_var3c_down) ) * weight_ht_reweight_isr_down"
      - name: "FSR"
        type: "sample"
        up_files:
          - "tt_PP8_FSR_UP_mc16a_AFII"
          - "tt_PP8_FSR_UP_mc16d_AFII"
          - "tt_PP8_FSR_UP_mc16e_AFII"
        down_files:
          - "tt_PP8_FSR_DOWN_mc16a_AFII"
          - "tt_PP8_FSR_DOWN_mc16d_AFII"
          - "tt_PP8_FSR_DOWN_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
        down_weight: "weight_ht_reweight_nominal"
      - name: "PH7"
        type: "sample"
        up_files:
          - "tt_PowH7_mc16a_AFII"
          - "tt_PowH7_mc16d_AFII"
          - "tt_PowH7_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "hdamp"
        type: "sample"
        up_files:
          - "tt_PP8_hdamp_UP_mc16a_AFII"
          - "tt_PP8_hdamp_UP_mc16d_AFII"
          - "tt_PP8_hdamp_UP_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "pthard"
        type: "sample"
        up_files:
          - "tt_PP8_pthard1_mc16a_AFII"
          - "tt_PP8_pthard1_mc16d_AFII"
          - "tt_PP8_pthard1_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "AFII_5FS"
        type: "sample"
        up_files:
          - "tt_PP8_mc16a_AFII"
          - "tt_PP8_mc16d_AFII"
          - "tt_PP8_mc16e_AFII"
        up_weight: "weight_ht_reweight_AFII"

  tt_1c:
    selection: "(HF_SimpleClassification == -1)"
    files:
      - "tt_PP8_mc16a"
      - "tt_PP8_mc16d"
      - "tt_PP8_mc16e"
    systematics:
      - name: "muR"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR20_muF10*weight_normalise_muR20_muF10) ) * weight_ht_reweight_muR_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR05_muF10*weight_normalise_muR05_muF10) ) * weight_ht_reweight_muR_down"
      - name: "muF"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR10_muF20*weight_normalise_muR10_muF20) ) * weight_ht_reweight_muF_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_muR10_muF05*weight_normalise_muR10_muF05) ) * weight_ht_reweight_muF_down"
      - name: "ISR"
        type: "weight"
        up_weight: "( 1/(weight_mc*weight_normalise) * (weight_var3c_up*weight_normalise_var3c_up) ) * weight_ht_reweight_isr_up"
        down_weight: "( 1/(weight_mc*weight_normalise) * (weight_var3c_down*weight_normalise_var3c_down) ) * weight_ht_reweight_isr_down"
      - name: "FSR"
        type: "sample"
        up_files:
          - "tt_PP8_FSR_UP_mc16a_AFII"
          - "tt_PP8_FSR_UP_mc16d_AFII"
          - "tt_PP8_FSR_UP_mc16e_AFII"
        down_files:
          - "tt_PP8_FSR_DOWN_mc16a_AFII"
          - "tt_PP8_FSR_DOWN_mc16d_AFII"
          - "tt_PP8_FSR_DOWN_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
        down_weight: "weight_ht_reweight_nominal"
      - name: "PH7"
        type: "sample"
        up_files:
          - "tt_PowH7_mc16a_AFII"
          - "tt_PowH7_mc16d_AFII"
          - "tt_PowH7_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "hdamp"
        type: "sample"
        up_files:
          - "tt_PP8_hdamp_UP_mc16a_AFII"
          - "tt_PP8_hdamp_UP_mc16d_AFII"
          - "tt_PP8_hdamp_UP_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "pthard"
        type: "sample"
        up_files:
          - "tt_PP8_pthard1_mc16a_AFII"
          - "tt_PP8_pthard1_mc16d_AFII"
          - "tt_PP8_pthard1_mc16e_AFII"
        up_weight: "weight_ht_reweight_nominal"
      - name: "AFII_5FS"
        type: "sample"
        up_files:
          - "tt_PP8_mc16a_AFII"
          - "tt_PP8_mc16d_AFII"
          - "tt_PP8_mc16e_AFII"
        up_weight: "weight_ht_reweight_AFII"

  tt_1b:
    selection: "(HF_SimpleClassification == 1 && (HF_Classification >= 1000 && HF_Classification < 1100))"
    files:
      - "ttbb_PP8_mc16a"
      - "ttbb_PP8_mc16d"
      - "ttbb_PP8_mc16e"
    systematics:
      - name: "muR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR20_muF10*weight_normalise_ttb_pp8_4FS_muR20_muF10)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR05_muF10*weight_normalise_ttb_pp8_4FS_muR05_muF10)"
      - name: "muF"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF20*weight_normalise_ttb_pp8_4FS_muR10_muF20)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF05*weight_normalise_ttb_pp8_4FS_muR10_muF05)"
      - name: "ISR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_up*weight_normalise_var3c_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_down*weight_normalise_var3c_down)"
      - name: "FSR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_up*weight_normalise_fsr_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_down*weight_normalise_fsr_down)"
      - name: "PH7"
        type: "sample"
        up_files:
          - "ttbb_PowH7_mc16a_AFII"
          - "ttbb_PowH7_mc16d_AFII"
          - "ttbb_PowH7_mc16e_AFII"
      - name: "pthard"
        type: "sample"
        up_files:
          - "ttbb_PP8_pthard1_mc16a"
          - "ttbb_PP8_pthard1_mc16d"
          - "ttbb_PP8_pthard1_mc16e"
      - name: "dipolePS"
        type: "sample"
        up_files:
          - "ttbb_PP8_dipolerecoil_mc16a_AFII"
          - "ttbb_PP8_dipolerecoil_mc16d_AFII"
          - "ttbb_PP8_dipolerecoil_mc16e_AFII"
      - name: "AFII_4FS"
        type: "sample"
        up_files:
          - "ttbb_PP8_mc16a_AFII"
          - "ttbb_PP8_mc16d_AFII"
          - "ttbb_PP8_mc16e_AFII"
      - name: "AFII_4FS_bzd2"
        type: "sample"
        up_files:
          - "ttbb_PP8_bzd2_mc16a_AFII"
          - "ttbb_PP8_bzd2_mc16d_AFII"
          - "ttbb_PP8_bzd2_mc16e_AFII"

  tt_2b:
    selection: "(HF_SimpleClassification == 1 && ((HF_Classification >= 200 && HF_Classification < 1000) || HF_Classification >= 1100))"
    files:
      - "ttbb_PP8_mc16a"
      - "ttbb_PP8_mc16d"
      - "ttbb_PP8_mc16e"
    systematics:
      - name: "muR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR20_muF10*weight_normalise_ttb_pp8_4FS_muR20_muF10)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR05_muF10*weight_normalise_ttb_pp8_4FS_muR05_muF10)"
      - name: "muF"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF20*weight_normalise_ttb_pp8_4FS_muR10_muF20)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF05*weight_normalise_ttb_pp8_4FS_muR10_muF05)"
      - name: "ISR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_up*weight_normalise_var3c_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_down*weight_normalise_var3c_down)"
      - name: "FSR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_up*weight_normalise_fsr_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_down*weight_normalise_fsr_down)"
      - name: "PH7"
        type: "sample"
        up_files:
          - "ttbb_PowH7_mc16a_AFII"
          - "ttbb_PowH7_mc16d_AFII"
          - "ttbb_PowH7_mc16e_AFII"
      - name: "pthard"
        type: "sample"
        up_files:
          - "ttbb_PP8_pthard1_mc16a"
          - "ttbb_PP8_pthard1_mc16d"
          - "ttbb_PP8_pthard1_mc16e"
      - name: "dipolePS"
        type: "sample"
        up_files:
          - "ttbb_PP8_dipolerecoil_mc16a_AFII"
          - "ttbb_PP8_dipolerecoil_mc16d_AFII"
          - "ttbb_PP8_dipolerecoil_mc16e_AFII"
      - name: "AFII_4FS"
        type: "sample"
        up_files:
          - "ttbb_PP8_mc16a_AFII"
          - "ttbb_PP8_mc16d_AFII"
          - "ttbb_PP8_mc16e_AFII"
      - name: "AFII_4FS_bzd2"
        type: "sample"
        up_files:
          - "ttbb_PP8_bzd2_mc16a_AFII"
          - "ttbb_PP8_bzd2_mc16d_AFII"
          - "ttbb_PP8_bzd2_mc16e_AFII"

  tt_1B:
    selection: "(HF_SimpleClassification == 1 && (HF_Classification >= 100 && HF_Classification < 200))"
    files:
      - "ttbb_PP8_mc16a"
      - "ttbb_PP8_mc16d"
      - "ttbb_PP8_mc16e"
    systematics:
      - name: "muR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR20_muF10*weight_normalise_ttb_pp8_4FS_muR20_muF10)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR05_muF10*weight_normalise_ttb_pp8_4FS_muR05_muF10)"
      - name: "muF"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF20*weight_normalise_ttb_pp8_4FS_muR10_muF20)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_ttb_pp8_4FS_muR10_muF05*weight_normalise_ttb_pp8_4FS_muR10_muF05)"
      - name: "ISR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_up*weight_normalise_var3c_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_var3c_down*weight_normalise_var3c_down)"
      - name: "FSR"
        type: "weight"
        up_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_up*weight_normalise_fsr_up)"
        down_weight: "1/(weight_mc*weight_normalise) * (weight_fsr_down*weight_normalise_fsr_down)"
      - name: "PH7"
        type: "sample"
        up_files:
          - "ttbb_PowH7_mc16a_AFII"
          - "ttbb_PowH7_mc16d_AFII"
          - "ttbb_PowH7_mc16e_AFII"
      - name: "pthard"
        type: "sample"
        up_files:
          - "ttbb_PP8_pthard1_mc16a"
          - "ttbb_PP8_pthard1_mc16d"
          - "ttbb_PP8_pthard1_mc16e"
      - name: "dipolePS"
        type: "sample"
        up_files:
          - "ttbb_PP8_dipolerecoil_mc16a_AFII"
          - "ttbb_PP8_dipolerecoil_mc16d_AFII"
          - "ttbb_PP8_dipolerecoil_mc16e_AFII"
      - name: "AFII_4FS"
        type: "sample"
        up_files:
          - "ttbb_PP8_mc16a_AFII"
          - "ttbb_PP8_mc16d_AFII"
          - "ttbb_PP8_mc16e_AFII"
      - name: "AFII_4FS_bzd2"
        type: "sample"
        up_files:
          - "ttbb_PP8_bzd2_mc16a_AFII"
          - "ttbb_PP8_bzd2_mc16d_AFII"
          - "ttbb_PP8_bzd2_mc16e_AFII"